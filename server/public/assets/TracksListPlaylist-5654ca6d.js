import{P as w,r as a,B as b,A as P,E as v,j as t,F as N,G as T,H as C,J as k}from"./index-d7cf4f9b.js";import{T as A}from"./TrashIcon-424d56fa.js";function F(){var c;const{id:r}=w(),{fetchTracksByPlaylistId:u,deleteTrackFromPlaylist:x}=a.useContext(b),{userPlaylists:i}=a.useContext(P),{setCurrentMusic:d,currentMusic:m,setCurrentPlaylist:h}=v(),[l,f]=a.useState([{status:"loading"}]),[n,y]=a.useState(null);async function o(){try{const e=await u(r);f(e)}catch(e){console.error(e)}}async function p(){try{const e=await i.find(s=>s.id===Number(r));y(e)}catch(e){console.error(e)}}const g=async(e,s)=>{try{await x(e,s,o)}catch(j){console.error(j)}};return a.useEffect(()=>{(async()=>(await o(),await p()))()},[r,i]),((c=l[0])==null?void 0:c.status)==="loading"?t.jsx(N,{}):t.jsxs("div",{className:"md:w-1/2 sm:w-2/3 w-full px-4 py-6 mx-auto flex flex-col gap-4",children:[t.jsx("h1",{className:"sm:w-1/2 w-full bg-light text-gray-300 text-2xl flex justify-center font-semibold p-3 rounded-full mx-auto mb-8",children:n==null?void 0:n.name}),l.map(e=>{const s=m.url===e.url;return t.jsxs("div",{className:`${s?" border-orange-400":"border-transparent"} flex gap-2 text-xs relative transition-shadow duration-300 shadow-lg hover:shadow-none bg-light rounded-2xl overflow-hidden text-white border-2 border-dashed`,children:[t.jsx("div",{className:"w-3/12 h-24",children:e.thumbnail?t.jsx("img",{className:"rounded-lg h-full w-full object-cover",alt:e.title,src:e.thumbnail}):t.jsx(T,{})}),t.jsxs("div",{className:"w-8/12 flex flex-col gap-2 justify-center",children:[t.jsx("h6",{className:"font-semibold text-sm",children:e.title}),t.jsx("p",{className:"text-xs text-gray-400",children:e.duration})]}),t.jsx("div",{onClick:()=>{s||(d(e,!0),h(l))},className:"w-1/6 min-w-[75px] flex justify-center items-center text-3xl rounded-xl hover:text-purple-300 bg-black/10 cursor-pointer transition-colors duration-300",children:s?t.jsx(C,{}):t.jsx(k,{})}),t.jsx("div",{onClick:()=>g(r,e.id),className:"w-1/8 min-w-[45px] flex justify-center items-center text-3xl bg-black/10 rounded-xl cursor-pointer",children:t.jsx(A,{className:"h-6 w-6 text-gray-400 hover:text-purple-300 hover:animate-spin "})})]},e.id)}),l.length===0&&t.jsx("p",{className:"text-center text-gray-400",children:"Aucune musique n'est pr√©sente dans cette playlist"})]})}export{F as default};
