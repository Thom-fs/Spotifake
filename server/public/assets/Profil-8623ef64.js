import{r as a,A as N,j as e,U as C}from"./index-d7cf4f9b.js";function k(){const{user:s,updateUser:h,updatePassword:b,fetchUser:y}=a.useContext(N),[d,l]=a.useState(!1),[m,c]=a.useState(""),[g,x]=a.useState(""),[r,u]=a.useState({firstname:(s==null?void 0:s.firstname)||"",lastname:(s==null?void 0:s.lastname)||"",pseudo:(s==null?void 0:s.pseudo)||"",email:(s==null?void 0:s.email)||""}),[o,f]=a.useState(!1),[n,w]=a.useState({newPassword:"",newPasswordConfirmation:""});a.useEffect(()=>{s&&u({firstname:(s==null?void 0:s.firstname)||"",lastname:(s==null?void 0:s.lastname)||"",pseudo:(s==null?void 0:s.pseudo)||"",email:(s==null?void 0:s.email)||""})},[s]);const i=t=>{u({...r,[t.target.name]:t.target.value})},p=t=>{w({...n,[t.target.name]:t.target.value})},v=async()=>{try{l(!0),await h(r),await y(),c("Vos informations ont été mises à jour avec succès !")}catch(t){x(t.message)}finally{l(!1)}},j=async()=>{try{l(!0),await b({password:n.newPassword,confirm_password:n.newPasswordConfirmation}),c("Votre mot de passe a été mis à jour avec succès !")}catch(t){x(t.message)}finally{l(!1),f(!1)}};return s?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center my-10",children:e.jsxs("div",{className:"flex flex-col items-center md:h-3/5 h-4/5 md:w-1/2 w-full bg-light md:rounded-3xl py-8",children:[e.jsx("div",{className:"photo-wrapper p-2",children:e.jsx(C,{className:"w-32 h-32 text-gray-100"})}),e.jsxs("div",{className:"flex flex-col py-2 items-center",children:[e.jsxs("h3",{className:"text-center text-xl text-gray-200 font-medium leading-8",children:[s.firstname," ",s.lastname]}),e.jsxs("div",{className:"flex flex-col items-center mt-4 md:w-5/6",children:[e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"firstname",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"Prénom"}),e.jsx("input",{type:"text",name:"firstname",id:"firstname",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:r.firstname,onChange:i})]}),e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"lastname",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"Nom"}),e.jsx("input",{type:"text",name:"lastname",id:"lastname",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:r.lastname,onChange:i})]}),e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"pseudo",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"Pseudo"}),e.jsx("input",{type:"text",name:"pseudo",id:"pseudo",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:r.pseudo,onChange:i})]}),e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"email",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"E-mail"}),e.jsx("input",{type:"text",name:"email",id:"email",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:r.email,onChange:i})]}),e.jsx("div",{className:"relative m-4 w-full",children:e.jsxs("h4",{className:"text-sm font-bold text-center text-gray-100",children:["Tu souhaites changer ton mot de passe ?"," ",e.jsx("button",{className:"pl-1 text-md font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary hover:bg-gradient-to-r hover:from-secondary hover:to-primary cursor-pointer",onClick:()=>f(!o),children:"Clique ici"})]})}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"newPassword",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"Nouveau mot de passe"}),e.jsx("input",{type:"text",name:"newPassword",id:"newPassword",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:n.newPassword,onChange:p})]}),e.jsxs("div",{className:"relative m-4 w-full",children:[e.jsx("label",{htmlFor:"newPasswordConfirmation",className:"absolute -top-2 left-2 inline-block px-1 text-xs bg-light font-medium text-gray-100",children:"Confirmez le nouveau mot de passe"}),e.jsx("input",{type:"text",name:"newPasswordConfirmation",id:"newPasswordConfirmation",className:"pl-2 block w-full rounded-md border-0 py-1.5 bg-light text-gray-100 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:outline-none focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",value:n.newPasswordConfirmation,onChange:p})]})]}),e.jsx("button",{className:"px-4 py-2 mt-4 text-lg font-bold text-center text-gray-100 bg-gradient-to-r from-primary to-secondary hover:bg-gradient-to-r hover:from-secondary hover:to-primary transition delay-150 rounded-full",onClick:o?j:v,disabled:d,children:d?"En cours...":o?"Valider mon nouveau mot de passe":"Enregistrer mes informations !"})]})]}),e.jsxs("div",{className:"w-1/2 relative",children:[m&&e.jsx("div",{className:"absolute w-full flex p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800",role:"alert",children:m}),g&&e.jsx("div",{className:"absolute w-full flex p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800",role:"alert",children:g})]})]})})}):e.jsx("p",{children:"Loading..."})}export{k as default};
