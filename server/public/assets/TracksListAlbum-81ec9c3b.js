import{F as f,r as l,B as y,G as b,j as e,H as j,J as w,K as N,A as v,X as P}from"./index-0525d998.js";const C=({selectedMusic:a,onClose:r})=>{const{user:x}=l.useContext(v),{addTrackToPlaylist:c,createPlaylist:m}=l.useContext(y),[h,o]=l.useState(!1),[d,n]=l.useState(""),[u,p]=l.useState(null),i=t=>{c(a.id,t.id),r()},s=async()=>{try{const t=await m(d);console.log("playlistId",t),await c(a.id,t),console.log("Nouvelle playlist créée et la chanson ajoutée à la playlist."),o(!1),n(""),r()}catch(t){p(t.message)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 cursor-default",children:e.jsxs("div",{className:"relative bg-light px-10 py-6 rounded-2xl",children:[e.jsx("button",{className:"absolute top-2 right-2 ",onClick:r,children:e.jsx(P,{className:"w-6 h-6 text-gray-400 cursor-pointer"})}),e.jsxs("h1",{className:"font-bold text-gray-400 my-4",children:['Ajouter " ',a==null?void 0:a.title,' " à une playlist :']}),x.playlists.map(t=>e.jsx("div",{className:" text-center font-semibold cursor-pointer mb-4 hover: ",onClick:()=>i(t),children:t.name},t.id)),e.jsx("div",{className:"text-center text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary font-semibold cursor-pointer",onClick:()=>o(!0),children:"Créer une nouvelle playlist"}),h&&e.jsxs("div",{className:"mt-4",children:[e.jsx("input",{type:"text",value:d,onChange:t=>n(t.target.value),className:"border border-gray-400 rounded-xl p-2 w-full text-light",placeholder:"Nom de la playlist"}),e.jsx("button",{onClick:s,className:"mt-2 bg-gray-500 text-white rounded-xl p-2 w-full hover:bg-gray-600 transition delay-50",children:"Valider"}),u&&e.jsx("div",{className:"error",children:u})]})]})})};function S(){const{id:a}=f(),{getTrackByAlbumId:r}=l.useContext(y),{setCurrentMusic:x,currentMusic:c,setCurrentPlaylist:m}=b(),[h,o]=l.useState(!1),[d,n]=l.useState(null),u=s=>{o(!0),n(s)},p=()=>{o(!1),n(null)},i=r(a);return console.log("filteredTracks",i),e.jsxs("div",{className:"md:w-1/2 sm:w-2/3 w-full px-4 py-6 mx-auto flex flex-col gap-4",children:[i.map(s=>{const t=c.url===s.url;return e.jsxs("div",{className:`${t?" border-primary":"border-transparent"} flex gap-2 text-xs relative transition-shadow duration-300 shadow-lg hover:shadow-none bg-light rounded-2xl overflow-hidden text-white border-2 border-dashed`,children:[e.jsx("div",{className:"w-3/12 h-24",children:s.thumbnail?e.jsx("img",{className:"rounded-lg h-full w-full object-cover",alt:s.title,src:s.thumbnail}):e.jsx(j,{})}),e.jsxs("div",{className:"w-8/12 flex flex-col gap-2 justify-center",children:[e.jsx("h6",{className:"font-semibold text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-400",children:s.duration}),e.jsx("button",{className:"text-right text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary font-semibold text-sm shadow-none focus:outline-none focus:ring-0 focus:shadow-none border-none",onClick:g=>{g.stopPropagation(),u(s)},children:"Ajouter à une playlist"})]}),e.jsx("div",{onClick:()=>{t||(x(s,!0),m(i))},className:"w-1/6 min-w-[75px] flex justify-center items-center text-3xl bg-black/10 cursor-pointer",children:t?e.jsx(w,{}):e.jsx(N,{})})]},s.id)}),h&&e.jsx(C,{selectedMusic:d,onClose:p})]})}export{S as default};
